@model IEnumerable<WasySender_2_0.DataModel.GetLists>

@{
    ViewBag.Title = "Destinatari";
}

<div class="col-lg-12">
    <div class="content-breadcrumb"><a href="/Home/Dashboard/">DASHBOARD</a> / DESTINATARI</div>
</div>

<div class="default-page">
    <div class="col-lg-12">
        <section>
            <div class="row">
                <div class="col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 text-center">
                    <div class="row">
                        <div class="col-lg-12">
                            <h1>DESTINATARI</h1>
                            <article>
                                In quest’area puoi aggiungere e modificare l'elenco dei destinatari.
                            </article>
                        </div>
                        <div class="col-lg-4 col-md-4 col-lg-offset-4 col-md-offset-4">
                            <a class="generic-btn" href="/User/AddDestinatari">AGGIUNGI NUOVA LISTA</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="content-table-responsive">
                        <div class="destinatari-grid">
                            @using (Html.BeginForm("SalvaListaVuota", "User", FormMethod.Post, new { @class = "request-form" }))
                            {
                                <ul style="height:52px;">
                                    <li class="ins-grid" style="padding:16px 0 0 0">Inserisci lista</li>
                                    <li class="ins-grid"><input type="text" name="nomeLista" required /></li>
                                    <li class="ins-grid"></li>
                                    <li class="ins-grid"><button type="submit">INSERISCI</button></li>
                                </ul>
                            }
                            <ul>
                                <li class="top-grid">DATA DI CREAZIONE</li>
                                <li class="top-grid">NOME DELLA LISTA</li>
                                <li class="top-grid">DETTAGLIO LISTA</li>
                                <li class="top-grid">ELIMINA LISTA</li>
                            </ul>
                            @if (Model != null)
                            {
                                foreach (var l in Model)
                                {
                                    <ul>
                                        <li>@l.date.ToString("dd/MM/yyyy HH:mm:ss")</li>
                                        <li>@l.name</li>
                                        <li><a href="/User/Details/@l.id"><img src="~/Images/IcnSearchRitiro.png" /></a></li>
                                        <li><a href="#" id="del-@l.id" class="btn-delete"><img src="~/Images/IcnDelete.png" /></a></li>
                                    </ul>
                                }
                            }
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
<script>
    $('.btn-delete').on("click", function () {
        var btnId = $(this).attr("id");
        var id = btnId.split("-")[1];
        var div = $('.destinatari-grid');
        if (confirm("Sei sicuro di voler eliminare il mittente?")) {
            $.get("/User/DeleteList/" + id)
                .done(function () {
                    var p = $("#" + btnId).parents("ul");
                    p.slideUp(400);
                });
        };
    });

</script>



